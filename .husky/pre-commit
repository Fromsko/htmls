#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# 更新 README.md 中的时间戳
echo "📝 更新时间戳..."
bun run update-timestamp || echo "⚠️ 时间戳更新失败，但继续提交"

# 格式化暂存文件
echo "✨ 格式化代码..."
bun exec lint-staged

# 如果格式化失败，退出
if [ $? -ne 0 ]; then
  echo "❌ 代码格式化失败，请检查"
  exit 1
fi

echo "✅ 提交前检查完成"
